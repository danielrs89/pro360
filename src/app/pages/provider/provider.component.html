@if(handleService.isCreate) {
<!-- ==================== MODO CREACI√ìN ==================== -->
<div class="container text-center">
  <div class="row align-items-center">
    <div class="col"></div>
    <div class="col-sm-6 col-md-8">
      <form [formGroup]="providerForm">
        <!-- CIF del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-cif" class="form-label">*CIF</label>
            <input
              type="text"
              class="form-control"
              id="provider-cif"
              formControlName="cif_provider"
              required
            />
          </div>
        </fieldset>

        <!-- Nombre del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-name" class="form-label">*Nombre</label>
            <input
              type="text"
              class="form-control"
              id="provider-name"
              formControlName="name_provider"
              required
            />
          </div>
        </fieldset>

        <!-- Email del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-email" class="form-label">*Email</label>
            <input
              type="text"
              class="form-control"
              id="provider-email"
              formControlName="email_provider"
              required
            />
          </div>
        </fieldset>

        <!-- Tel√©fono del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-phone" class="form-label">*Tel√©fono</label>
            <input
              type="text"
              class="form-control"
              id="provider-phone"
              formControlName="phone_provider"
              required
            />
          </div>
        </fieldset>

        <!-- Categor√≠a del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-category" class="form-label">*Categor√≠a</label>
            <select
              class="form-select"
              id="provider-category"
              formControlName="id_category"
              required
            >
              <option value="" disabled selected>...</option>
              @for (category of categoryService.categoriesLIst; track $index) {
              <option [value]="category.id_category">
                {{ category.name_category }}
              </option>
              }
            </select>
          </div>
        </fieldset>

        <!-- Cuenta del Proveedor -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-count" class="form-label">*Cuenta</label>
            <input
              type="text"
              class="form-control"
              id="provider-count"
              formControlName="count_provider"
              required
            />
          </div>
        </fieldset>
      </form>
    </div>
    <div class="col"></div>
  </div>

  <!-- Botones de Acci√≥n -->
  <div class="row align-items-center">
    <div class="col">
      <button
        type="button"
        class="btn btn-outline-danger"
        (click)="cancelCreateEdit()"
      >
        Cancelar
      </button>
    </div>
    <div class="col"></div>
    <div class="col">
      <button
        type="button"
        class="btn btn-outline-success"
        (click)="createProvider()"
        [disabled]="providerForm.invalid"
      >
        Crear Proveedor
      </button>
    </div>
  </div>
</div>

} @else if (handleService.isEdit) {
<!-- ==================== MODO EDICI√ìN ==================== -->
<div class="container text-center">
  <div class="row align-items-center">
    <div class="col"></div>
    <div class="col-sm-6 col-md-8">
      <form [formGroup]="providerForm">
        <!-- Mismos campos que en creaci√≥n pero para edici√≥n -->
        <fieldset>
          <div class="mb-3">
            <label for="provider-cif" class="form-label">CIF</label>
            <input
              type="text"
              class="form-control"
              id="provider-cif"
              formControlName="cif_provider"
              required
            />
          </div>
        </fieldset>

        <fieldset>
          <div class="mb-3">
            <label for="provider-name" class="form-label">Nombre</label>
            <input
              type="text"
              class="form-control"
              id="provider-name"
              formControlName="name_provider"
              required
            />
          </div>
        </fieldset>

        <fieldset>
          <div class="mb-3">
            <label for="provider-email" class="form-label">Email</label>
            <input
              type="text"
              class="form-control"
              id="provider-email"
              formControlName="email_provider"
              required
            />
          </div>
        </fieldset>

        <fieldset>
          <div class="mb-3">
            <label for="provider-phone" class="form-label">Tel√©fono</label>
            <input
              type="text"
              class="form-control"
              id="provider-phone"
              formControlName="phone_provider"
              required
            />
          </div>
        </fieldset>

        <fieldset>
          <div class="mb-3">
            <label for="provider-category" class="form-label">Categor√≠a</label>
            <select
              class="form-select"
              id="provider-category"
              formControlName="id_category"
              required
            >
              <option value="" disabled selected>...</option>
              @for (category of categoryService.categoriesLIst; track $index) {
              <option [value]="category.id_category">
                {{ category.name_category }}
              </option>
              }
            </select>
          </div>
        </fieldset>

        <fieldset>
          <div class="mb-3">
            <label for="provider-count" class="form-label">*Cuenta</label>
            <input
              type="text"
              class="form-control"
              id="provider-count"
              formControlName="count_provider"
              required
            />
          </div>
        </fieldset>
      </form>
    </div>
    <div class="col"></div>
  </div>

  <!-- Botones de Acci√≥n -->
  <div class="row align-items-center">
    <div class="col">
      <button
        type="button"
        class="btn btn-outline-danger"
        (click)="cancelCreateEdit()"
      >
        Cancelar
      </button>
    </div>
    <div class="col"></div>
    <div class="col">
      <button
        type="button"
        class="btn btn-outline-primary"
        (click)="updateProvider()"
        [disabled]="providerForm.invalid"
      >
        Actualizar Proveedor
      </button>
    </div>
  </div>
</div>

} @else {
<!-- ==================== MODO VISUALIZACI√ìN ==================== -->
<div class="container text-center">
  <button
    type="button"
    class="btn btn-outline-primary m-5"
    (click)="handleCreate(true)"
  >
    Crear nuevo proveedor
  </button>
</div>

<!-- Lista de Proveedores -->
@for (provider of providerService.providersList; track $index) {
<div class="container-fluid text-center px-5">
  <!-- Cambiado a container-fluid y a√±adido px-5 -->
  <div class="row align-items-center justify-content-center">
    <!-- A√±adido justify-content-center -->
    <!-- Bot√≥n Editar -->
    <div class="col-1">
      <!-- Especificado ancho de columna -->
      <p
        class="trash-icon rounded float-end"
        (click)="handleUpdate(provider.id_provider, true)"
      >
        üñäÔ∏è
      </p>
    </div>

    <!-- Tarjeta de Proveedor - Ahora m√°s ancha -->
    <div class="col-9">
      <!-- Aumentado el ancho de la columna principal -->
      <div class="card mb-3">
        <div class="row g-0">
          <div class="col-md-12">
            <!-- Ocupa todo el ancho disponible -->
            <div class="card-body text-start p-4">
              <!-- A√±adido m√°s padding -->
              <h5 class="card-title">{{ provider.name_provider }}</h5>
              <p class="card-text">
                <strong>CIF:</strong> {{ provider.cif_provider }}
              </p>
              <p class="card-text">
                <a
                  class="text-decoration-none"
                  [href]="'mailto:' + provider.email_provider"
                >
                  üìß {{ provider.email_provider }}
                </a>
              </p>
              <p class="card-text">
                <a
                  class="text-decoration-none"
                  [href]="'https://wa.me/+34' + provider.phone_provider"
                  target="_blank"
                >
                  üìû {{ provider.phone_provider }}
                </a>
              </p>
              <p class="card-text">
                <strong>Categor√≠a:</strong> {{ provider.name_category }}
              </p>
              <p class="card-text">
                <strong>Cuenta:</strong> {{ provider.count_provider }} ‚Ç¨
              </p>
              <div class="text-center mt-3">
                <button
                  class="btn btn-outline-secondary mt-2"
                  [routerLink]="['/product/', provider.id_provider]"
                >
                  Ver Productos
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bot√≥n Eliminar -->
    <div class="col-1">
      <!-- Especificado ancho de columna -->
      <p
        class="trash-icon rounded float-start"
        (click)="handleDelete(provider.id_provider)"
      >
        üóëÔ∏è
      </p>
    </div>
  </div>
</div>

} @empty {
<div class="container text-center mt-5">
  <h2>No hay proveedores registrados</h2>
</div>
}}
